#!/usr/bin/env ruby 

require_relative '../config/environment.rb'

URL = "http://jservice.io/api/random?count=6"
parsed_url = URI.parse(URL)
response = Net::HTTP.get_response(parsed_url)
categories_hash = JSON.parse(response.body)

def batch_category_creation(categories_hash)
  categories_hash.each do |category|
    name = category["category"]["title"].split(" ").map(&:capitalize).join(" ")
    date = category["airdate"].gsub(/T(.+)/, "")
    id = category["category_id"]
    Category.new(name, date, id)
  end
end

batch_category_creation(categories_hash)
binding.pry


# get array of categories first
# then create questions from the categories